(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{199:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return a})),r.d(t,"metadata",(function(){return s})),r.d(t,"toc",(function(){return c})),r.d(t,"default",(function(){return u}));var n=r(3),o=r(7),i=(r(0),r(342)),a={id:"persistence",title:"Persistence"},s={unversionedId:"persistence",id:"version-0.4.0/persistence",isDocsHomePage:!1,title:"Persistence",description:"TerrabaseDB supports the persistent storage of data, which is an inherently obvious need for any database. In this document we explore how persistence works.",source:"@site/versioned_docs/version-0.4.0/4.persistence.md",slug:"/persistence",permalink:"/docs/0.4.0/persistence",version:"0.4.0",sidebar:"version-0.4.0/docs",previous:{title:"UPDATE",permalink:"/docs/0.4.0/Actions/update"},next:{title:"Benchmarking",permalink:"/docs/0.4.0/benchmarking"}},c=[{value:"How persistence works",id:"how-persistence-works",children:[]},{value:"Caveats",id:"caveats",children:[]}],p={toc:c};function u(e){var t=e.components,r=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},p,r,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"TerrabaseDB supports the persistent storage of data, which is an inherently obvious need for any database. In this document we explore how persistence works."),Object(i.b)("h3",{id:"how-persistence-works"},"How persistence works"),Object(i.b)("p",null,"As per the current design, TDB on startup will check if a data.bin file exists in the working directory. If it does, then the existing key/value pairs are restored, otherwise an empty HashMap<K, V> is loaded into memory. When the database shuts down, the keys are written to disk."),Object(i.b)("h3",{id:"caveats"},"Caveats"),Object(i.b)("p",null,"However, the current persistence strategy is not very efficient since it rewrites the entire in-memory table back onto disk, regardless of changes, that is, even if no changes are made, TDB still rewrites the same data to disk. This will change in the future with a better disk storage format."))}u.isMDXComponent=!0},342:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return b}));var n=r(0),o=r.n(n);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=o.a.createContext({}),u=function(e){var t=o.a.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},l=function(e){var t=u(e.components);return o.a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},f=o.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,a=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),l=u(r),f=n,b=l["".concat(a,".").concat(f)]||l[f]||d[f]||i;return r?o.a.createElement(b,s(s({ref:t},p),{},{components:r})):o.a.createElement(b,s({ref:t},p))}));function b(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,a=new Array(i);a[0]=f;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:n,a[1]=s;for(var p=2;p<i;p++)a[p]=r[p];return o.a.createElement.apply(null,a)}return o.a.createElement.apply(null,r)}f.displayName="MDXCreateElement"}}]);